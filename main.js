(()=>{"use strict";class t{constructor(t,e){this.element=t,this.text=e,this.render=this.render.bind(this),this.remove=this.remove.bind(this),this.element.addEventListener("click",this.render)}createWidget(t,e){const n=document.createElement("div");return n.id=t,n.classList.add("widget-collapsible"),n.textContent=e,n}bindWidget(t){const{top:e,left:n}=this.element.getBoundingClientRect();t.style.left=n+"px",t.style.top=e+this.element.offsetHeight+"px"}render(){if(this.element.getAttribute("aria-describedby"))return;this.element.setAttribute("aria-describedby",performance.now());const t=this.element.getAttribute("aria-describedby"),e=this.createWidget(t,this.text);this.bindWidget(e),this.element.insertAdjacentElement("afterEnd",e),setTimeout((()=>{document.querySelector(`[id='${t}']`).classList.add("widget-collapsible_animation")}),0),this.element.removeEventListener("click",this.render),this.element.addEventListener("click",this.remove)}remove(){const t=this.element.getAttribute("aria-describedby"),e=document.querySelector(`[id='${t}']`);e.classList.remove("widget-collapsible_animation"),setTimeout((()=>{e.remove()}),1e3),this.element.removeAttribute("aria-describedby"),this.element.addEventListener("click",this.render),this.element.removeEventListener("click",this.remove)}}class e{constructor(t){this.parentEl=t,this.openChatBtn=document.querySelector(".callback-chat__open-btn"),this.render=this.render.bind(this),this.remove=this.remove.bind(this),this.hoverOpenChatBtn=this.hoverOpenChatBtn.bind(this),this.outOpenChatBtn=this.outOpenChatBtn.bind(this),this.openChatBtn.addEventListener("click",this.render),this.openChatBtn.addEventListener("mouseover",this.hoverOpenChatBtn),this.openChatBtn.addEventListener("mouseout",this.outOpenChatBtn)}static get markup(){return'\n      <div class="callback-chat">\n        <h2 class="callback-chat__title">Напишите нам</h2>\n        <textarea class="callback-chat__text"></textarea>\n        <button class="callback-chat__send-btn">Отправить</button>\n        <button class="callback-chat__close-btn">X</button>\n      </div>\n    '}hoverOpenChatBtn(){this.openChatBtn.classList.add("callback-chat__open-btn_hover")}outOpenChatBtn(){this.openChatBtn.classList.remove("callback-chat__open-btn_hover")}render(){this.parentEl.insertAdjacentHTML("beforeEnd",e.markup);const t=document.querySelector(".callback-chat"),n=document.querySelector(".callback-chat__close-btn");this.openChatBtn.classList.add("callback-chat__open-btn_hidden"),setTimeout((()=>{t.classList.add("callback-chat_show")}),0),n.addEventListener("click",this.remove)}remove({currentTarget:t}){t.closest(".callback-chat").classList.remove("callback-chat_show"),setTimeout((()=>{t.closest(".callback-chat").remove()}),100),this.openChatBtn.classList.remove("callback-chat__open-btn_hidden")}}class n{constructor(t){this.parentEl=t,this.likerBtn=document.querySelector(".liker-btn"),this.animations=["flight1","flight2","flight3","flight4"],this.renderImage=this.renderImage.bind(this),this.likerBtn.addEventListener("click",this.renderImage)}createImage(){const{left:t,top:e}=this.likerBtn.getBoundingClientRect(),n=(i=this.animations.length,Math.floor(Math.random()*i));var i;const s=document.createElement("img");return s.classList.add("image-heart"),s.classList.add(this.animations[n]),s.style.top=e+"px",s.style.left=t+this.likerBtn.offsetWidth/2-16+"px",s.src="https://github.com/netology-code/ahj-homeworks/raw/AHJ-50/anim/pic/heart.png",s}renderImage(){const t=this.createImage();this.parentEl.appendChild(t),t.addEventListener("animationend",this.removeImage)}removeImage({currentTarget:t}){t.remove()}}document.addEventListener("DOMContentLoaded",(()=>{const i=document.querySelector(".collapse-btn");new t(i,"С другой стороны, курс на социально-ориентированный национальный проект обеспечивает актуальность как самодостаточных, так и внешне зависимых концептуальных решений. Задача организации, в особенности же убеждённость некоторых оппонентов напрямую зависит от поставленных обществом задач."),new e(document.body),new n(document.body)}))})();